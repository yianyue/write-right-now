<div class="container">

<!-- TODO: Update User Goal -->
<div ng-controller="UserCtrl as user">
  <div class="page-header"><h1>{{ $root.currentUser.name }}'s Entries</h1></div>
  
<!--   <p>Daily goal: {{ $root.currentUser.goal }} words
  <span class="input-btn">
    <button class="btn" aria-pressed="false" autocomplete="off" aria-label="Edit"
    data-toggle="collapse" data-target="#goalInput" aria-expanded="false" aria-controls="goalInput">Change Goal</button>
  </span>
  </p>

  <div class="collapse" id="goalInput">
    <div class="well">
      <form name="goal" class="form-inline" ng-model-options="{ updateOn: 'blur' }">
        <label for="goal">Goal</label>
        <input name="goal"
              class="form-control" 
              ng-model="user.info.goal"
              ng-change="user.updateGoal()">
      </form>
    </div>
  </div> -->


<div class="main list-group" ng-repeat="day in main.days | orderBy:'date':true">

  <div ng-show="day.entry">

    <a class="list-group-item" ng-hide="day.entry.locked" ng-href="#/entries/{{ day.entry.id }}">
      <h3>{{ day.date | date:"MMM d, y" }}</h3>
      <h3>{{day.entry.progress}}%</h3>
      <div class="progress">      
        <div class="progress-bar 
        ng-class: day.entry.word_count/day.entry.goal >= 1 ? 'progress-bar-success' : 'progress-bar-info'" 
        role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" 
        style="width: {{ day.entry.progress > 100 ? 100 : day.entry.progress }}%">
        </div>
      </div><!-- progress -->
      <span>{{ day.entry.word_count }} / {{ day.entry.goal }}</span> words
      <p class="text-muted">{{day.entry.preview}}</p>
    </a>

    <div class="list-group-item" ng-show="day.entry.locked">
      <h3>{{ day.date | date:"MMM d, y" }} <span class="glyphicon glyphicon-lock" aria-hidden="true"></span></h3>
      <h3>{{day.entry.progress}}%</h3>
      <div class="progress">
        <div class="progress-bar 
        ng-class: day.entry.word_count/day.entry.goal >= 1 ? 'progress-bar-success' : 'progress-bar-info'" 
        role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" 
        style="width: {{ day.entry.progress > 100 ? 100 : day.entry.word_count/day.entry.goal*100 }}%"></div>
      </div><!-- progress -->
      <span>{{ day.entry.word_count }} / {{ day.entry.goal }}</span> words
      <p class="text-muted">{{day.entry.preview}}</p>
    </div>
    
  </div><!-- ng-show -->

  <div ng-hide="day.entry">
    <div class="list-group-item">
      <h3>{{ day.date | date:"MMM d, y" }}</h3>
      <h3>0%</h3>
      <div class="progress">      
        <div class="progress-bar"  
        role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" 
        style="width: 0%">
        </div>
      </div><!-- progress -->
      <p class="text-muted">You skipped :(</p>
    </div>
  </div><!-- ng-hide -->


</div>
  
</div>